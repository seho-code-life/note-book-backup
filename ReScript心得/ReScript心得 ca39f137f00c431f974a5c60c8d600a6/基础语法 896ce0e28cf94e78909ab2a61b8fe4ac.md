# åŸºç¡€è¯­æ³•

## letç»‘å®š

åœ¨rescriptä¸­ä¸å­˜åœ¨constå’Œvar, letå…³é”®å­—å°±ä¼šè¢«ç¼–è¯‘ä¸ºvar

### åŸºç¡€ç”¨æ³•

```jsx
let hello = "hello"
let world = "world"
let message = hello ++ world
```

### å—çº§ä½œç”¨åŸŸç»‘å®š

å­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨ ++ ç›¸è¿æ¥, åŒæ ·çš„, letç»‘å®šæ”¯æŒå—ä½œç”¨åŸŸè¿”å›å€¼, æœ€åä¸€è¡Œä¼šè¢«éšå¼è¿”å›, æ¯”å¦‚è¿™æ ·

```jsx
let area = {
    let width = 10;
    let height = 20;
    width * height
}
```

### ç»‘å®šè¦†ç›–

å…¶æ¬¡, ç»‘å®šæ˜¯**ä¸å¯å˜**çš„, å°±åƒtsä¸­çš„constä¸€æ ·, å®ƒä¼šåœ¨ç¼–è¯‘æ—¶æç¤ºä½ ; æˆ‘ä»¬å¦‚æœè¦ä¿®æ”¹ä¸€ä¸ªå˜é‡å¦‚ä½•æ“ä½œ, è¿™å°±æ˜¯ç»‘å®šè¦†ç›–, æˆ‘ä»¬ä½¿ç”¨çš„ç»‘å®šæ˜¯ä¸Šæ–¹è·ç¦»æœ€è¿‘çš„ç»‘å®š

```jsx
var result = 0;
result = calculate(result);
result = calculateSomeMore(result);
```

æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€ä¸ªä¾‹å­, å®é™…ä¸Šresultåœ¨ç¬¬äºŒè¡Œä¸­è®¡ç®—çš„ç»“æœ, åªæ˜¯ä¸ºäº†ç¬¬ä¸‰è¡Œçš„å†æ¬¡è®¡ç®—, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸º**æ³¨é‡Š**, æˆ‘ä»¬è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ¡ˆ:

```jsx
let result = 0
let result = calculate(result)
let result = calculateSomeMore(result)
```

æˆ‘ä»¬å¯ä»¥åŒæ—¶å£°æ˜ä¸€æ¨¡ä¸€æ ·çš„ç»‘å®š, å®é™…ä¸Šå®ƒè¢«ç¼–è¯‘ä¸º

```jsx
var result = calculate(0);
var result$1 = calculateSomeMore(result);
```

ä½ å¯ä»¥å‘ç°ç¼–è¯‘çš„jsä¸­, å…¶å®å¹¶æ²¡æœ‰å¯¹resultåšä¿®æ”¹, å¦‚æœå¼€å‘è€…éœ€è¦çœŸæ­£çš„ä¿®æ”¹, rescriptä¸­æœ‰å…¶ä»–çš„ç‰¹æ€§æ”¯æŒ, ä½†æ˜¯ä¸ºä»€ä¹ˆrescriptä¼šè¿™ä¹ˆåš, æ˜¯å› ä¸ºjsçš„è¯­æ³•è®¾è®¡ä¸Šæ˜¯å…è®¸ç”¨æˆ·éšæ„ä¿®æ”¹å˜é‡çš„, è¿™å¯¹ç”¨æˆ·å’Œå¼€å‘è€…æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªæ½œåœ¨çš„å¨èƒ, åœ¨reså¼€å‘ä¸­æˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒå› ä¸ºå˜é‡ä¿®æ”¹é€ æˆçš„bug, è€Œä¸”ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªä¼˜ç§€çš„å¼€å‘ä¹ æƒ¯.

### ç§æœ‰letç»‘å®š

åœ¨resæ¨¡å—ä¸­, æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯é»˜è®¤å¯¼å‡ºå…¬å¼€çš„, è¿™å°±æ„å‘³ç€, æˆ‘ä»¬æœ‰æ—¶å€™åœ¨ç¨‹åºä¸­æƒ³åˆ»æ„éšè—æŸäº›å€¼æ—¶. éœ€è¦æä¾›ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ç­¾åå¹¶ä¸”åˆ—å‡ºå®ƒçš„ç±»å‹

```jsx
module A: {
  let b: int
} = {
  let a = 3
  let b = 4
}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸å¯¹é«˜ç‰ˆæœ¬çš„ç‰¹æ€§, ç§æœ‰åŒ–letç®€åŒ–è¿™ä¸ªé—®é¢˜

```jsx
module A = {
  %%private(let a = 3)
  let b = 4
}
```

---

## ç±»å‹

rescriptä¸­çš„ç±»å‹æ˜¯è¯­è¨€è®¾è®¡çš„ä¸€å¤§äº®ç‚¹, ç»“åˆå®˜æ–¹æ–‡æ¡£å®ƒæœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹

1. å¼ºç±»å‹ (ç±»å‹intä¸ä¼šå˜ä¸ºstring, å³ç±»å‹ä¸ä¼šå˜æ›´)
2. é™æ€ç±»å‹ (å’Œtsä¸€æ ·, åœ¨ç¼–è¯‘åä¼šæ“¦é™¤ç±»å‹, ä¸ä¼šåœ¨è¿è¡Œæ—¶å› ä¸ºç±»å‹æŸè€—æ€§èƒ½)
3. å¥å…¨ (type sound, å³ç±»å‹ä¸ä¼šå‡ºé”™, ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç±»å‹æ˜¯å›ºå®šçš„, ä¸ä¼šå› ä¸ºçŒœæµ‹ç±»å‹, å¯¼è‡´ç³»ç»Ÿå˜å¾—å±é™©, è¿™ä¹Ÿæ˜¯å’Œtsä¸€ä¸ªå¤§å¤§çš„åŒºåˆ«)
4. ç±»å‹æ¨å¯¼ (ä¸å¿…å†™å‡ºç±»å‹, åœ¨resä¸­å…¨éƒ¨ä¼šè‡ªåŠ¨æ¨å¯¼)
5. å¿«é€Ÿ (æ‹¥æœ‰å¿«é€Ÿçš„ç±»å‹æ£€æŸ¥å·¥å…·)

### ç±»å‹æ¨å¯¼

```jsx
let score = 10
let add = (a, b) => a + b
```

åœ¨è¿™ä¸€æ®µä»£ç ä¸­, scoreå› ä¸º10çš„åŸå› , è¢«æ¨å¯¼ä¸ºint, è€Œaddå‡½æ•°çš„aå’Œbå‚æ•°å› ä¸ºa + bçš„ç®—æ•°è¿ç®—ç¬¦ + æ¨æ–­aå’Œbæ˜¯int

### ç±»å‹æ ‡æ³¨

å’Œtsä¸€æ ·, æˆ‘ä»¬åŒæ ·å¯ä»¥ç»™ä¸€ä¸ªå€¼æ ‡æ³¨ç±»å‹, ä½†æ˜¯ä¸tsä¸åŒçš„æ˜¯, resä¸ä¼šè®¤ä¸ºä½ æ ‡æ³¨çš„å°±æ˜¯å¯¹çš„, å¦‚æœæ¨æ–­çš„ç±»å‹å’Œæ ‡æ³¨çš„ç±»å‹ä¸ä¸€è‡´, ä¼šåœ¨ç¼–è¯‘ä¸­æŠ¥é”™

```jsx
// æ ‡æ³¨å‚æ•°
let a: int = 1
let add2 = (a: int, b: int) => a + b
// æ ‡æ³¨ä¸€ä¸ªå‡½æ•°è¿”å›å€¼
let add3 = (a: int, b: int): int => a + b
```

å¦‚æœæˆ‘ä»¬å°†add2å‡½æ•°æ”¹ä¸º

```jsx
let add2 = (a: string, b: int) => a + b
```

```jsx
This has type: string
  Somewhere wanted: int
  
  You can convert string to int with Belt.Int.fromString.
```

ç¼–è¯‘å™¨ä¼šæç¤ºä½ , æ¨æ–­çš„ç±»å‹å’Œæ ‡æ³¨ä¸ä¸€è‡´, æç¤ºæˆ‘ä»¬è¦è½¬æ¢ä¸€ä¸‹ç±»å‹, å¹¶ä¸”ç»™æˆ‘ä»¬äº†ä¸€ä¸ªæç¤ºå‡½æ•°

### ç±»å‹åˆ«å

tsæœ‰çš„, resä¹Ÿä¼šæœ‰, æˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªç±»å‹è¿›è¡Œèµ·å, é€šå¸¸æ˜¯æˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªç±»å‹æ‰ä¼šéœ€è¦

```jsx
type scoreType = int
let b : scoreType = 1
```

### ç±»å‹å‚æ•° / æ³›å‹

ç±»å‹å‚æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´ç®€æ´çš„ä¹¦å†™ç±»å‹, å°½ç®¡resæœ‰ç€å¼ºå¤§çš„ç±»å‹æ¨å¯¼, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€™aæ¥æ ‡æ³¨ä¸€ä¸ªå‚æ•°, ä¹Ÿå°±ç­‰åŒäºtsä»£ç ä¸­çš„<T>

```jsx
type coordinates<'a> = ('a, 'a, 'a)
```

æˆ‘ä»¬åªéœ€è¦åœ¨å‚æ•°å‰é¢åŠ å…¥`â€˜`å³å¯, å’Œtsä¸€æ ·, æˆ‘ä»¬å¯ä»¥æ¥å—è®¸å¤šç±»å‹å‚æ•°, å¹¶ä¸”å¯ä»¥éšæ„ç»„åˆ, åœ¨resæ ‡å‡†åº“ä¸­, ç”¨ç±»å‹å‚æ•°è§£å†³äº†å¾ˆå¤šä»£ç é—®é¢˜, æ¯”å¦‚arrayçš„æ³›å‹, ä¸å¯èƒ½è¦å®šä¹‰å¤šä¸ª`arrayOfString`, `arrayOfInt`, æœ‰äº†æ³›å‹åªéœ€è¦å®šä¹‰ä¸€ä¸ª`array`, å†æŠŠç±»å‹ä¼ é€’è¿›å»å³å¯

### é€’å½’ç±»å‹

tsçš„ç±»å‹æ”¯æŒé€’å½’, resä¹ŸåŒæ ·æ”¯æŒ, å¯ä»¥åœ¨ä¸€ä¸ªç±»å‹ä¸­è‡ªå·±å¼•å…¥è‡ªå·±

```jsx
type rec person = {
  name: string,
  friends: array<person>
}
```

æœ‰ä¸€ç§é€’å½’ç±»å‹æ˜¯ç›¸äº’é€’å½’, æ¯”å¦‚aä¾èµ–b, båŒæ—¶åˆä¾èµ–a, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨andæ¥è¡¨è¾¾äº’ç›¸é€’å½’

```jsx
type rec student = {taughtBy: teacher}
and teacher = {students: array<student>}
```

### ç±»å‹é€ƒç”Ÿ

resæä¾›äº†ç±»å‹é€ƒç”Ÿ, ä½†æ˜¯ä¸åƒtsé‚£æ ·ç®€å•, æˆ‘å€’æ˜¯å¸Œæœ›ç±»å‹é€ƒç”Ÿè¶Šéš¾è¶Šå¥½, å› ä¸ºæˆ‘ä»¬ç¼–å†™çš„ç»å¤§å¤šæ•°ä»£ç éƒ½æ˜¯å¯æ§çš„, å°½ç®¡å®ƒå†åŠ¨æ€, ä¹Ÿä¸è¦æ»¥ç”¨è¿™ä¸ªç‰¹æ€§

```jsx
external convertToFloat : int => float = "%identity"
// externalæ˜¯resçš„ä¸€ä¸ªæ¦‚å¿µ, åœ¨è¿™é‡Œä½ å¯ä»¥ç†è§£ä¸ºlet
let age = 10
let gpa = 2.1 +. convertToFloat(age)
// è¢«å£°æ˜è¿‡çš„convertToFloatå¤„ç†ä¹‹å, å°±å¯ä»¥è½¬æ¢ç±»å‹äº†
```

---

## åŸºç¡€ç±»å‹

resåœ¨jsä¹‹ä¸Š, æ–°å¢äº†å‡ ä¸ªç±»å‹, ä»¥ä¾¿è§£å†³jsçš„å„ç§ç±»å‹é™·é˜±

### å­—ç¬¦ä¸²

```jsx
let greeting = "Hello world!"
let multilineGreeting = "Hello
 world!"
```

ä¸åŒäºjs, è¦æ‹¼æ¥2ä¸ªå­—ç¬¦ä¸²è¦ä½¿ç”¨++

```jsx
// è¦è¿æ¥2ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ ++
let name = greeting ++ " My name is Jack."
```

resä¹Ÿæä¾›äº†å­—ç¬¦ä¸²æ¨¡æ¿, å’Œes6ä¸€æ ·

```jsx
let name = "Joe"

let greeting = `Hello
World
ğŸ‘‹
${name}
`
```

å€¼å¾—æ³¨æ„çš„æ˜¯, æˆ‘ä»¬åœ¨ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿æ—¶, å¦‚æœè¦æ’å…¥éå­—ç¬¦ä¸²çš„å€¼, æ¯”å¦‚ä¸€ä¸ªint, é‚£ä¹ˆéœ€è¦æŠŠintè½¬æ¢ä¸ºå­—ç¬¦ä¸², æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨**j**æ¥è¡¨è¾¾**éšå¼è½¬æ¢**

```jsx
let age = 10
let message = j`Today I am $age years old.`
```

### å­—ç¬¦

æˆ‘ä»¬åœ¨ä¸Šæ–¹ä½¿ç”¨åŒå¼•å·è¡¨è¾¾ä¸€ä¸ªå­—ç¬¦ä¸², åœ¨è¿™é‡Œæˆ‘ä»¬è¦ä½¿ç”¨å•å¼•å·è¡¨è¾¾ä¸€ä¸ªå­—ç¬¦

```jsx
let firstLetterOfAlphabet = 'a'
```

å®ƒè¢«ç¼–è¯‘ä¸º

```jsx
var firstLetterOfAlphabet = /* 'a' */97;
```

### æ­£åˆ™è¡¨è¾¾å¼

```jsx
let r = %re("/b/g")
```

### å¸ƒå°”ç±»å‹

å’Œjsä¸€æ ·, æœ‰&&, ||, â‰¥=ç­‰è¿ç®—ç¬¦, è€Œä¸”==, === ç­‰å’Œjsä¸€æ ·

### æ•´æ•°

resçš„æ•´æ•°ç±»å‹intå’Œjsä¸åŒ, åªæ”¯æŒ32ä½æ•´æ•°, å¿…è¦æ—¶æˆªæ–­, ä¹Ÿæ”¯æŒ* + -ç­‰è¿ç®—ç¬¦å·, æˆ‘ä»¬å¦‚æœè¦ç»‘å®šå¤§çš„æ•°å­—å»ºè®®æ¢ä¸ºæµ®ç‚¹ç±»å‹. å’Œjsä¸€æ ·, ä¸ºäº†å¯è¯»æ€§, å¯ä»¥åœ¨intä¸­æ·»åŠ ä¸‹åˆ’çº¿ç”¨äºåˆ†å‰²: `1_000_000`

### æµ®ç‚¹æ•°

æ¯”å¦‚0.5 + 0.6, åŒæ•´æ•°ä¸€æ ·, å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿è¿›è¡Œåˆ†å‰²

### Unit

unitç±»å‹åªæœ‰ä¸€ä¸ªå€¼ä¸º`()`, ç¼–è¯‘ä¸ºundefined, æ˜¯ä¸€ä¸ªå“‘ç±»å‹, ä½œä¸ºå ä½ç¬¦, å¤§å¤šæ•°æƒ…å†µä¸ä¼šéœ€è¦å®ƒ

---

## å…ƒç»„

resæœ‰ç€å…ƒç»„åŠŸèƒ½, åœ¨jsä¸­ä¸å­˜åœ¨, ä½†æ˜¯å®ƒç¼–è¯‘ä¸ºjsçš„æ•°ç»„, å…ƒç»„æœ‰å‡ ä¸ªæ¦‚å¿µ

1. ä¸å¯å˜
2. æœ‰åº
3. åˆ›å»ºæ—¶å›ºå®šå¤§å°
4. å¯ä»¥åŒ…å«ä¸åŒçš„å€¼

å’Œtsçš„å…ƒç»„çš„å¤§éƒ¨åˆ†æ¦‚å¿µåŸºæœ¬ä¸€è‡´, ä½ å¯ä»¥æŒ‡å®šå®ƒçš„ç±»å‹, ä¹Ÿå¯ä»¥è®©resæ¨å¯¼

```jsx
let tu: (int, float) = (1, 1.0)
```

ä¼šè¢«ç¼–è¯‘ä¸ºjs

```jsx
var tu = [
  1,
  1.0
];
```

> å…ƒç»„æ²¡æœ‰å¤§å°ä¸º1çš„, å¦‚æœæœ‰, å°±ä½¿ç”¨å€¼æœ¬èº«å³å¯
> 

æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…ƒç»„ä¹‹å, å¯ä»¥å»è§£æ„å®ƒ

```jsx
let (_, y, _) = my3dCoordinates // now you've retrieved y
```

å…ƒç»„æ˜¯æ— æ³•ä¿®æ”¹çš„, ä½†æ˜¯å¦‚æœæœ‰ç›¸å…³éœ€æ±‚çš„è¯, å¯ä»¥åŸºäºä¸€ä¸ªå…ƒç»„å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç»„

```jsx
let coordinates1 = (10, 20, 30)
let (c1x, _, _) = coordinates1
let coordinates2 = (c1x + 50, 20, 30)
```

ä½ ä¹Ÿå¯ä»¥åƒrustä¸€æ ·, ç›´æ¥è¿”å›ä¸€ä¸ªå…ƒç»„

```jsx
let getCenterCoordinates = () => {
  let x = doSomeOperationsHere()
  let y = doSomeMoreOperationsHere()
  (x, y)
}
```

---

## Recordè®°å½•

resçš„recordå’Œjsçš„å¯¹è±¡å¾ˆåƒ, ä¹Ÿä¸è¦å’Œtsçš„Recordç±»å‹è¿›è¡Œæ¯”è¾ƒ

æ¯”å¦‚æˆ‘ä»¬å£°æ˜ä¸€ä¸ªrecordç±»å‹

```jsx
type person = {
  age: int,
  name: string,
}
```

é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­å†™ä¸€æ®µjså¯¹è±¡ä»£ç 

```jsx
let me = {
  age: 5,
  name: "Big ReScript"
}
```

### è‡ªåŠ¨æ¨æ–­ç±»å‹

ä½ ä¼šæƒŠå¥‡çš„å‘ç°, åœ¨resä¸­å®ƒè‡ªåŠ¨æ¨å¯¼ä¸ºpersonäº†, å› ä¸ºresä¼šæ£€æŸ¥ä½ çš„å­—æ®µæ˜¯å¦å’Œå·²çŸ¥æ–‡ä»¶æ¨¡å—ä¸‹çš„ç±»å‹ç›¸ç¬¦åˆ, å¦‚æœç¬¦åˆ, é‚£ä¹ˆå¼€å‘è€…æ— éœ€æ‰‹åŠ¨æŒ‡å®šç±»å‹, å¦‚æœåœ¨tsä¸­, é‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿™ä¹ˆå†™

```jsx
let me: person = {}
```

### è®¿é—®å±æ€§

é‚£ä¹ˆæˆ‘ä»¬è¦è®¿é—®ä¸€ä¸ªrecordå±æ€§, ä¹Ÿæ˜¯å’Œjsä¸€æ ·çš„

```jsx
let name = me.name
```

### ä¿®æ”¹recordå¯¹è±¡

å¦‚æœæˆ‘ä»¬è¦æ›´æ”¹å¯¹è±¡, æ˜¯ä¸å…è®¸çš„, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡, ç”¨`å±•å¼€è¿ç®—ç¬¦â€¦`

```jsx
let meNextYear = {...me, age: me.age + 1}
```

### å¯ä¿®æ”¹çš„recordå±æ€§

è¦æ›´æ”¹æŸä¸ªå±æ€§çš„å€¼æ˜¯è¢«å…è®¸çš„, æˆ‘ä»¬åªéœ€è¦åœ¨recordå‰é¢åŠ å…¥`mutable`

```jsx
type person = {
  name: string,
  mutable age: int
}

let baby = {name: "Baby ReScript", age: 5}
me.age = 18
```

### å¯é€‰recordå±æ€§

é‚£ä¹ˆæˆ‘ä»¬åœ¨å¼€å‘ä¸­, æ˜¯éœ€è¦çµæ´»æ€§çš„æ“ä½œæ•°æ®çš„, æˆ‘ä»¬ä¸å¯èƒ½æ°¸è¿œåˆå§‹åŒ–æ•´ä¸ªå¯¹è±¡, æ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ç±»ä¼¼tså¯¹è±¡ä¸­çš„å¯é€‰åŠŸèƒ½`?`

```jsx
type person = {
  age: int,
  name?: string
}
```

å¦‚æœæˆ‘ä»¬ä½¿ç”¨`?`æ ‡è®°äº†ä¸€ä¸ªå±æ€§, é‚£ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶, å¦‚æœæ²¡ä¼ å…¥name, é‚£ä¹ˆnameå°†ä¼šæ˜¯`None`ç±»å‹

é‚£ä¹ˆå¦‚æœæˆ‘ä»¬çš„recordç±»å‹ä¸­å­˜åœ¨å¯é€‰, é‚£ä¹ˆå¦‚ä½•é€šè¿‡`â€¦` ä¿®æ”¹å¯¹è±¡å‘¢? é¦–å…ˆæˆ‘ä»¬å¯ä»¥ä¸ç”¨å…³å¿ƒå®ƒæ˜¯å¦å¯é€‰, ç›´æ¥è®¾ç½®å€¼å³å¯, å’Œæˆ‘ä»¬æ­£å¸¸æƒ…å†µæ˜¯ä¸€æ ·çš„, ä¹Ÿç¬¦åˆæˆ‘ä»¬jså¼€å‘è€…çš„ç›´è§‚

```jsx
type person = {
  age: int,
  name?: string
}

let me = {
  age: 123,
  name: "Hello"
}

let withoutName = {
  ...me,
  name: "New Name"
}
```

å½“ç„¶ä½ æœ‰æ—¶å€™å¹¶ä¸æƒ³è®¾ç½®nameè¿™ä¸ªå¯é€‰å­—æ®µä¸€ä¸ªå…·ä½“çš„å€¼, é‚£ä¹ˆä½ å¯ä»¥ç›´æ¥ä½¿ç”¨`Option`, ä½†æ˜¯ä½ éœ€è¦åœ¨å€¼å‰é¢åŠ `?`

```jsx
let maybeName = Some("My Name")

let withoutName = {
  ...me,
  name: ?maybeName
}
```

æˆ–è€…ä½ å¯ä»¥ç›´æ¥ä¸€é¼“ä½œæ°”çš„è®¾ç½®ä¸º`?None`

```jsx
let withoutName = {
  ...me,
  name: ?None
}
```

### å¯é€‰recordä¸­çš„æ¨¡å¼åŒ¹é…

æ¨¡å¼åŒ¹é…æ˜¯resä¸­çš„ä¸€å¤§ç‰¹è‰², åœ¨ç¬”è®°ä¹‹åä¹Ÿä¼šè¯¦ç»†ä»‹ç»è¿™ä¸€å¼ºå¤§ç‰¹æ€§, æ¨¡å¼åŒ¹é…ç®€å•æ¥è¯´å°±æ˜¯æŠ›å¼ƒæ‰æ‚ä¹±æ— ç« çš„if else, ç”¨ç®€æ´çš„è¯­æ³•å¯ä»¥åšé€»è¾‘åˆ¤æ–­, è€Œåœ¨resä¸­çš„æ¨¡å¼åŒ¹é…ä¼šç”Ÿæˆå‡ºé«˜è´¨é‡çš„é€»è¾‘åˆ¤æ–­.

åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬å¯èƒ½çœ‹ä¸å¤ªæ‡‚æ¨¡å¼åŒ¹é…, ä¸è¿‡ä¸ç”¨æ‹…å¿ƒ, æˆ‘ä»¬åªéœ€è¦getæœ€æ ¸å¿ƒçš„å†…å®¹å°±å¥½.

1. é¦–å…ˆæˆ‘ä»¬å¦‚æœå¯¹å¯é€‰å€¼ç›´æ¥è¿›è¡Œæ¨¡å¼åŒ¹é…, æˆ‘ä»¬é¡ºç€æ€è·¯å†™å°±å¯ä»¥, æ²¡æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„

```jsx
let isRescript = switch me.name {
| Some("ReScript") => true
| Some(_) | None => false
}
```

1. ä½†æ˜¯æˆ‘ä»¬å¦‚æœå¯¹å¯¹è±¡åšæ¨¡å¼åŒ¹é…æ—¶, ç±»å‹ç³»ç»Ÿä¼š`â€œæŒ‘å‡ºå¯é€‰å€¼â€`

```jsx
let isRescript = switch me {
| {name: "ReScript"} => true
| _ => false
}
```

1. ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™å°±æƒ³çŸ¥é“æŸä¸ªå¯é€‰å€¼æ˜¯å¦è®¾ç½®äº†å’‹åŠ?

```jsx
let nameWasSet = switch me {
| {name: ?None} => false
| {name: ?Some(_)} => true
}
```

åœ¨Noneå’ŒSomeä¹‹å‰åªéœ€è¦åŠ ä¸€ä¸ª?, æ¥å‘ŠçŸ¥æ¨¡å¼åŒ¹é…å¼•æ“: `â€œæˆ‘è¦åŒ¹é…ä¸€ä¸‹å¯é€‰å€¼â€`

### å…³äºrecordæŠ€å·§

å¤§å®¶å­¦äº†å¾ˆä¹…çš„resäº†, ä¹Ÿäº†è§£äº†resæ˜¯æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­ç±»å‹çš„, è€Œä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“æ˜¯æ ¹æ®è·ç¦»å½“å‰ä»£ç ä¸Šæ–¹æœ€è¿‘çš„è¿›è¡Œæ¨æ–­, æ¯”å¦‚:

```jsx
type  = {age: int, name: string}
type monster = {age: int, hasTentacles: bool}

let getAge = (entity) => entity.age
```

getAgeçš„å‡½æ•°ä¸­çš„entityå‚æ•°ä¼šè¢«æ¨æ–­ä¸ºmonsterç±»å‹, æ‰€ä»¥personç±»å‹çš„recordå€¼å†ä¼ å…¥getAgeæ—¶, æ˜¯è‚¯å®šä¼šæŠ¥é”™çš„, **å°½ç®¡å®ƒå­˜åœ¨.ageçš„å¿…é€‰å­—æ®µ**

### recordè®¾è®¡å†³ç­–

è¿™ä¸€ä¸ªéƒ¨åˆ†, æˆ‘å°†å°½å¯èƒ½çš„æ¯”å®˜æ–¹æ–‡æ¡£è®²çš„æ›´æ˜ç™½

1. ä¸ºä»€ä¹ˆåœ¨å¼€å‘ä¸­record > å¯¹è±¡, å› ä¸ºrecordæ˜¯ç±»å‹åŒ–çš„, ä¹Ÿæ˜¯ç‹¬ä¸€æ— äºŒçš„, å¾ˆå¤§ç¨‹åº¦é¿å…äº†æˆ‘ä»¬åˆšåˆšäº†è§£åˆ°çš„ç¨‹åºéšè—æ¼æ´: **å…·æœ‰ç›¸åŒå­—æ®µåçš„ä¸åŒå¯¹è±¡ä¼ é€’ç»™åŒä¸€ä¸ªå‡½æ•°**, æˆ‘ä»¬è¦é¿å…è¿™ç§æƒ…å†µ
2. å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬çš„æ•°æ®å½¢çŠ¶æ˜¯å›ºå®šçš„;  å¦‚æœä¸æ˜¯, **å˜ä½“**(reså¦å¤–ä¸€ä¸ªæ¦‚å¿µ) + recordå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜
3. æˆ‘ä»¬å­¦ä¹ çš„recordç±»å‹æ˜¯éœ€è¦é€šè¿‡å•ä¸€çš„æ˜¾å¼å£°æ˜æ¥è§£å†³çš„, åœ¨ç¼–è¯‘å™¨æ–¹é¢ä¼šæ¯”å¯¹ç­‰ç±»å‹ (å…ƒç»„)æç¤ºæ›´å¥½, ä¼šæ›´å¸®åŠ©å¼€å‘è€…æå‰å‘ç°é”™è¯¯; æ¯”å¦‚æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹å‘ç”Ÿäº†å˜æ›´, æˆ‘åªéœ€è¦ä¿®æ”¹recordç±»å‹å­—æ®µå³å¯, è¿™æ ·ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æç¤ºæˆ‘, å“ªé‡Œç”¨åˆ°äº†è¿™ä¸ªrecord, ä¼šè®©é‡æ„æ›´æ–¹ä¾¿, ä½†æ˜¯åœ¨å¯¹ç­‰ç±»å‹æ—¶, ç¨‹åºå‘˜æ˜¯ä¸çŸ¥é“æ˜¯å®šä¹‰é”™äº†, è¿˜æ˜¯ä½¿ç”¨é”™äº†. (è¿™ä¸ªæƒ…å†µä¹ŸåŒæ ·é€‚ç”¨äºTså¼€å‘è€…)

### åè¯ç§‘æ™®

- åä¹‰ç±»å‹: æŒ‡çš„æ˜¯éœ€è¦æ˜¾å¼å®šä¹‰è€Œä¸”å…·æœ‰åå­—çš„ç±»å‹
- ç»“æ„ç±»å‹: ä¸æ˜¯ç”±åç§°æˆ–è€…å…¶ä»–å› ç´ äº§ç”Ÿçš„ç±»å‹, è€Œæ˜¯ç”±å®é™…ç»“æ„, æ¯”å¦‚å…¸å‹çš„å…ƒç»„

```jsx
let tu: (int, float) = (1, 1.0)
```

---

## å˜ä½“

å˜ä½“æ¦‚å¿µçš„å­˜åœ¨å¯ä»¥å…è®¸æˆ‘ä»¬å®šä¹‰**æˆ–è€…**, æˆ‘ä»¬å¯ä»¥é€šè¿‡`|`åˆ†å‰²æ¥è¡¨è¾¾ä¸€ä¸ªç±»å‹

```jsx
type myResponse =
  | Yes
  | No
  | PrettyMuch

let areYouCrushingIt = No
```

æ­¤æ—¶areYouCrushingItçš„å€¼ä¸º0, æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯å˜ä½“çš„è§„åˆ™æ˜¯é¦–å­—æ¯å¤§å†™, myResponseå°±æ˜¯ä¸€ä¸ªå˜ä½“ç±»å‹, åˆ†åˆ«ä»£è¡¨äº†3ç§æƒ…å†µ

### æ˜¾å¼å®šä¹‰

æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®šä¹‰ä¸€ä¸ªå˜ä½“, å¹¶ä¸”å¯ä»¥å¼•ç”¨å®ƒ, å¦‚æœåœ¨å…¶ä»–æ–‡ä»¶æ¨¡å—ä¸­, éœ€è¦é€šè¿‡æ¨¡å—åè®¿é—®åˆ°å˜ä½“ç±»å‹

```jsx
// Zoo.res
type animal = Dog | Cat | Bird
```

```jsx
// Example.res
let pet: Zoo.animal = Dog // preferred
// or
let pet2 = Zoo.Dog
```

### æ„é€ å™¨å‚æ•°

æˆ‘ä»¬åœ¨å˜ä½“ä¸­ä¹Ÿå¯ä»¥ç¼–å†™ä¸€æ®µæ„é€ å™¨, å¯ä»¥è®©å•çº¯çš„å˜ä½“æ‰¿è½½æ›´å¤šçš„æ•°æ®

```jsx
type account =
  | None
  | Instagram(string)
  | Facebook(string, int)
```

```jsx
let myAccount = Facebook("Josh", 26)
let friendAccount = Instagram("Jenny")
```

å®ƒè¢«ç¼–è¯‘ä¸ºjs

```jsx
var myAccount = {
  TAG: /* Facebook */1,
  _0: "Josh",
  _1: 26
};

var friendAccount = {
  TAG: /* Instagram */0,
  _0: "Jenny"
};
```

é‚£ä¹ˆä½ å¯èƒ½è§‰å¾—ç¼–è¯‘å‡ºæ¥çš„jså¾ˆä¸‘, é‚£æˆ‘ä»¬å†æ¥è¯•è¯•å†…è”è®°å½•, å³recordç±»å‹ç›´æ¥åœ¨å˜ä½“ä¸­è¡¨è¾¾

```jsx
type user =
  | Number(int)
  | Id({name: string, password: string})

let me = Id({name: "Joe", password: "123"})
```

```jsx
var me = {
  TAG: /* Id */1,
  name: "Joe",
  password: "123"
};
```

æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°å†…è”recordåœ¨å˜ä½“ä¸­è¡¨ç°çš„å¾ˆå¥½, è¾“å‡ºçš„jsä¹Ÿå¾ˆä¼˜é›…, èƒ½æ‰¿è½½æ›´å¤šä¿¡æ¯, åŒæ ·çš„æˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨å†…è”record, æˆ‘ä»¬ç›´æ¥ä¼ é€’ä¸€ä¸ªrecordè¿›æ¥çœ‹çœ‹

```
type u = {name: string, password: string}

type user =
  | Number(int)
  | Id(u)

let me = Id({name: "Joe", password: "123"})
```

```jsx
var me = {
  TAG: /* Id */1,
  _0: {
    name: "Joe",
    password: "123"
  }
};
```

ç”±æ­¤å¯è§, æˆ‘å¹¶ä¸æ¨èå¤§å®¶è¿™æ ·å†™, å› ä¸ºè¾“å‡ºä¸å¤Ÿä¼˜é›…, è€Œä¸”æ€§èƒ½ä¹Ÿæ¯”è¾ƒå·®

### è¾“å‡º

æˆ‘ä»¬å›è¿‡å¤´æ¥, å†ä»”ç»†æ£€æŸ¥ä¸€ä¸‹å˜ä½“çš„è¾“å‡º, é¦–å…ˆå˜ä½“ä¼šæœ‰3ç§å½¢æ€çš„jsè¾“å‡º

1. æ²¡æœ‰payload, ä¼šè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªæ•°å­—
2. å¸¦payloadçš„æ„é€ å™¨, ä¼šè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªå¯¹è±¡, é™„å¸¦ä¸€ä¸ªTagå­—æ®µ, è¿˜æœ‰_01, _02ä¹‹ç±»çš„; ä½†æ˜¯å¦‚æœä¸€ä¸ªå˜ä½“ä»…ä»…åªåŒ…å«ä¸€ä¸ªå¸¦payloadçš„æ„é€ å™¨, é‚£ä¹ˆå°±æ²¡æœ‰Tagå­—æ®µ, å› ä¸ºTagå­—æ®µæ˜¯ç”¨æ¥åŒºåˆ†ä¸åŒå˜ä½“çš„
3. ä½¿ç”¨recordä½œä¸ºpayloadçš„å˜ä½“, è¾“å‡ºä¸€ä¸ªä¼˜é›…çš„jså¯¹è±¡

### æŠ€å·§

1. æˆ‘ä»¬åœ¨tsä¸­å¯ä»¥ç»å¸¸è¿™æ ·æè¿°ä¸€ä¸ªå˜ä½“

```jsx
type myType = int | string
```

åœ¨resä¸­ä¸ä¼šè¢«å…è®¸, ä½ å¿…é¡»ç»™æ¯ä¸ªåˆ†æ”¯ä¸€ä¸ªæ„é€ å™¨, è¿™å¯ä»¥ä¸ºä½ é¿å…å¾ˆå¤šé”™è¯¯

```jsx
type myType = Int(int) | String(string)
```

1. åœ¨recordçš„ç« èŠ‚ä¸­, æˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªå‡½æ•°æ˜¯ä¸èƒ½æ¥å—å±æ€§ç›¸åŒçš„2ä¸ªrecordç±»å‹, å˜ä½“ä¹Ÿæ˜¯ä¸€æ ·çš„, å°½ç®¡æ„é€ å™¨ç›¸åŒ, æˆ‘ä»¬ä»ç„¶ä¸èƒ½æŠŠ2ä¸ªå˜ä½“æ··ä¸ºä¸€è°ˆ, åœ¨ä¹‹åä¼šæœ‰ä¸€ä¸ªå¦å¤–çš„æ¦‚å¿µå«åšâ€œ**å¤šæ€å˜ä½“**â€å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜

### å†³ç­–

å˜ä½“æ˜¯è‡³å…³é‡è¦çš„, ä½œä¸ºä¸€ä¸ªç±»å‹ç³»ç»Ÿ, ä¸èƒ½ç›´æ¥æ¶ˆé™¤bug, æˆ‘ä»¬ç¨‹åºå‘˜äº§ç”Ÿbugçš„ä¸»è¦æ¥æºå°±æ˜¯æ²¡æœ‰è¦†ç›–åˆ°è¾¹ç•Œæƒ…å†µ, æ‰€ä»¥æˆ‘ä»¬åœ¨è®¾è®¡æ•°æ®ç»“æ„çš„æ—¶å€™, éœ€è¦æˆ‘ä»¬æ­£ç¡®å»ºæ¨¡, æ¯”å¦‚ä¸€ä¸ªæ•°æ®éœ€è¦æ˜¯**è¿™ä¸ª**æˆ–è€…**é‚£ä¸ª**, é‚£ä¹ˆå˜ä½“å°±å°¤ä¸ºé‡è¦äº†, å†æ­é…ä¸Šresçš„æ¨¡å¼åŒ¹é…, æˆ‘ä»¬å¯ä»¥å®Œç¾è¦†ç›–æ‰€æœ‰çš„æƒ…å†µ. 

æˆ–è€…ä»æ€§èƒ½ä¸Šè®², resä¸­çš„å˜ä½“æ˜¯å¯ä»¥åŠ å¿«ç¨‹åºè¿è¡Œé€Ÿåº¦çš„, æ¯”å¦‚è¿™é‡Œæœ‰ä¸€æ®µjsä»£ç 

```jsx
let data = 'dog'
if (data === 'dog') {
  ...
} else if (data === 'cat') {
  ...
} else if (data === 'bird') {
  ...
}
```

å®ƒæ˜¯ä¸€ä¸ªO(n)çš„åŒ¹é…, å¦‚æœæˆ‘ä»¬ç”¨å˜ä½“æ”¹å†™çš„è¯, æ˜¯è¿™æ ·å­çš„

```jsx
type animal = Dog | Cat | Bird
let data = Dog
switch data {
| Dog => Js.log("Wof")
| Cat => Js.log("Meow")
| Bird => Js.log("Kashiiin")
}
```

resçš„ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æŠŠanimalè”æƒ³ä¸º0,1,2, ç„¶åä¼šç›´æ¥ç¼–è¯‘switch, ç„¶åè¿›è¡Œä¸€ä¸ªskip

```jsx
console.log("Wof");

var data = /* Dog */0;
```

ç”±æ­¤å¯è§, reså®£ç§°å¯ä»¥ç”Ÿæˆæ›´å¹²å‡€çš„jsä»£ç , å¹¶ä¸æ˜¯ç©ºç©´æ¥é£

---

## å¤šæ€å˜ä½“

åœ¨ä¸Šä¸€ç« èŠ‚ä¸­æˆ‘ä»¬è®²è§£äº†å˜ä½“, è€Œå¤šæ€å˜ä½“ç±»ä¼¼äºå˜ä½“, ä½†æ˜¯æœ‰ä¸€äº›åŒºåˆ«

1. å£°æ˜æ–¹å¼ä¸åŒ, ä»¥#å¼€å¤´, æ„é€ å™¨çš„åå­—ä¸éœ€è¦é¦–å­—æ¯å¤§å†™
2. ä¸éœ€è¦å®šä¹‰ç±»å‹, å…¨éƒ¨æ˜¯æ¨æ–­å‡ºæ¥çš„
3. å¯ä»¥å…±äº«æ„é€ å™¨, éšæ„ç»„åˆ

æˆ‘ä»¬è¿™æ ·åˆ›å»ºä¸€ä¸ªå¤šæ€å˜ä½“

```jsx
let myColor = #red
let myLabel = #"aria-hidden"
let myNumber = #7
```

å¯ä»¥å¾ˆæ¸…æ™°çš„è¾“å‡ºjs

```jsx
var myColor = "red";
var myLabel = "aria-hidden";
var myNumber = 7;
```

æ‰€ä»¥å®ƒå¯ä»¥å¾ˆå¥½çš„å’Œjsäº’æ“ä½œ, æ¯”å¦‚å¯ä»¥ç›´æ¥ç»‘å®šå­—ç¬¦ä¸²å’Œå¯¹è±¡, å¯¹å»ºæ¨¡è€Œè¨€éå¸¸æœ‰ç”¨, å’Œtsä¸€æ ·, ä½†æ˜¯å”¯ä¸€å’Œtsä¸åŒçš„æ˜¯, è¿™æ ·çš„å†™æ³•ä¸ä¼šå’Œæ™®é€šå­—ç¬¦ä¸²å’Œæ•°å­—ææ··.

å¤šæ€å˜ä½“æ˜¯ç»“æ„åŒ–ç±»å‹, ç±»å‹æ˜¯å¯æ¨å¯¼çš„, ä½†æ˜¯ä½ ä»ç„¶å¯ä»¥äº‹å…ˆå£°æ˜ä¸€ä¸ªç±»å‹

```jsx
type color = [#red | #green | #blue]
```

```jsx
let render = (myColor: [#red | #green | #blue]) => {
  switch myColor {
  | #blue => Js.log("Hello blue!")
  | #red
  | #green => Js.log("Hello other colors")
  }
}
```

### æ„é€ å™¨å‚æ•°

```jsx
// æ„é€ å™¨å‚æ•°, å’Œæ™®é€šçš„å˜ä½“æ˜¯ä¸€æ ·çš„
type account = [
  | #Anonymous
  | #Instagram(string)
  | #Facebook(string, int)
]

let me: account = #Instagram("Jenny")
let him: account = #Facebook("Josh", 26)
```

```jsx
// åŒæ ·çš„, ä½ å¯ä»¥ç”¨å…¶ä»–ç±»å‹æ„é€ å¤šæ€å˜ä½“

type red = [#Ruby | #Redwood | #Rust]
type blue = [#Sapphire | #Neon | #Navy]
```

ç»„åˆè€Œæˆçš„å¤šæ€å˜ä½“, æ¨¡å¼åŒ¹é…ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸‹ç‰¹æ®Šçš„åŒ¹é…æ–¹æ³•

```jsx
// é‚£ä¹ˆå¯¹äºè¿™ç§æ··åˆçš„å¤šæ€å˜ä½“, æ¨¡å¼åŒ¹é…å¾—è¦ä½¿ç”¨ç¨å¾®å¤æ‚ä¸€ç‚¹çš„, ä¹Ÿå°±æ˜¯ç±»ä¼¼äºçš„å±•å¼€è¿ç®—ç¬¦

switch myColor {
| #...blue => Js.log("This blue-ish")
| #...red => Js.log("This red-ish")
| other => Js.log2("Other color than red and blue: ", other)
}
```

```jsx
// å½“ç„¶ä½ å¯ä»¥å…¨éƒ¨å±•å¼€è¿›è¡Œæ¨¡å¼åŒ¹é…
switch myColor {
| #Sapphire | #Neon | #Navy => Js.log("This is blue-ish")
| #Ruby | #Redwood | #Rust => Js.log("This is red-ish")
| other => Js.log2("Other color than red and blue: ", other)
}
```

### å¤šæ€å˜ä½“çš„ç±»å‹çº¦æŸ

```jsx
let basic: [#Red] = #Red
let foreground: [> #Red] = #Green
let background: [< #Red | #Blue] = #Red
```

å¦‚æœæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªå¼€æ”¾çš„å¤šæ€ç±»å‹çš„è¯, å¯ä»¥å€ŸåŠ©ç±»å‹å‚æ•°æ‰©å±•å·²æœ‰å¤šæ€ç¼–è¯‘

```jsx
type basicBlueTone<'a> = [> #Blue | #DeepBlue | #LightBlue ] as 'a
type color = basicBlueTone<[#Blue | #DeepBlue | #LightBlue | #Purple]>
```

### å¼ºåˆ¶ç±»å‹è½¬æ¢

é›¶æˆæœ¬ä»å¤šæ€å˜ä½“åˆ‡æ¢åˆ°string

```jsx
type company = [#Apple | #Facebook]
let theCompany: company = #Apple

let message = "Hello " ++ (theCompany :> string)
```

### æ€»ç»“

æˆ‘ä»¬å­¦å®Œå¤šæ€å˜ä½“ä¹‹å, æˆ‘ä»¬ä¼šå‘ç°å¤šæ€å˜ä½“å¾ˆè‡ªç”±, å¯ä»¥ä¼˜é›…çš„å’Œjsäº’æ“ä½œ, ä¹Ÿæœ‰ç±»å‹ç»„åˆçš„èƒ½åŠ›, æ¨¡å¼åŒ¹é…ä¹Ÿå¾ˆæ–¹ä¾¿, è€Œä¸”ä¸ç”¨åƒå˜ä½“è¿™æ ·çš„åä¹‰ç±»å‹éœ€è¦æ‰‹åŠ¨å†™ä¸€å †å»ºæ¨¡. æ‰€ä»¥è¿™ä¸€ç« æˆ‘ä»¬å°±æ¥è®²è®²å˜ä½“ç±»å‹æœ‰å“ªäº›å‘

1. ç¼–è¯‘å™¨æŠ¥é”™, åŸå› å°±æ˜¯å˜ä½“æ˜¯åä¹‰ç±»å‹çš„, æŠ¥é”™å¯ä»¥æ›´å¥½çš„æº¯æº, ç®€è€Œè¨€ä¹‹å°±æ˜¯å¥½æ’æŸ¥é”™è¯¯
2. é‡æ„å¤šæ€å˜ä½“ä¹Ÿå¾ˆéš¾, å› ä¸ºæˆ‘ä»¬ä¿®æ”¹å˜ä½“å’Œä¿®æ”¹jså˜é‡ä¸€æ ·ä¸å—é™åˆ¶, ä½†æ˜¯æ™®é€šå˜ä½“çš„ä¿®æ”¹éœ€è¦æ˜¾å¼çš„æŒ‡å®šæ¥æº

```jsx
let myFruit = #Apple
let mySecondFruit = #Apple
let myCompany = #Apple
```

å¦‚ä¸Šæ–‡ä¾‹å­, æˆ‘ä»¬ä¿®æ”¹ç¬¬ä¸€ä¸ªä¹‹å, ä¸æ„å‘³ç€æˆ‘ä»¬è¦ä¿®æ”¹ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ª, è€Œæ™®é€šå˜ä½“ä¼šè®©ä½ æ„è¯†åˆ°å“ªé‡Œéœ€è¦é‡æ„

1. å¤§å®¶éƒ½çŸ¥é“resçš„ç¼–è¯‘å™¨å¾ˆå¼ºå¤§, ç»å¸¸ä¼šå¸®æˆ‘ä»¬åˆå¹¶æ­¥éª¤å¹¶ä¸”ç®€åŒ–, ä½†æ˜¯å¦‚æœæˆ‘ä»¬å†™äº†å¤šæ€å˜ä½“, å…¶å®ç¼–è¯‘å™¨æ˜¯æ— æ³•åšè¿‡å¤šçš„ä¼˜åŒ–çš„, æ¯”å¦‚ä¸‹é¢çš„ä»£ç , å°½ç®¡çŸ¥é“mycoloræ˜¯red, ä½†æ˜¯ä»ç„¶æ— æ³•è‡ªåŠ¨åˆ é™¤æ¨¡å¼åŒ¹é…çš„blue-case

```jsx
let myColor = #red

switch myColor {
| #red => Js.log("Hello red!")
| #blue => Js.log("Hello blue!")
}
```

å®˜æ–¹å»ºè®®, èƒ½ç”¨æ™®é€šå˜ä½“å°±ç”¨æ™®é€šå˜ä½“, åœ¨éœ€è¦å’Œjsäº’æ“ä½œçš„æƒ…å†µä¸‹, å†ä½¿ç”¨å¤šæ€å˜ä½“

---

## Option, undefined, null

resä¸­ä¸å­˜åœ¨nullå’Œundefind, è¿™å°±æ„å‘³ç€æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä¸ä¼šå­˜åœ¨undefined is not a functionè¿™ç§æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„æŠ¥é”™å•¦! ä½†æ˜¯resæœ‰ä¸€ç§å˜ä½“ç±»å‹æ¥è¡¨è¾¾ç©ºè¿™ä¸ªå­˜åœ¨, è®¾è®¡å‚ç…§äº†rust (æˆ‘æƒ³å¤§æ¦‚æ˜¯), æˆ‘ä»¬åœ¨ä¹‹å‰çš„ç« èŠ‚å­¦ä¹ äº†æ™®é€šå˜ä½“, é‚£ä¹ˆoptionå°±æ˜¯ä¸€ä¸ªæ™®é€šå˜ä½“ç±»å‹, å®ƒçš„å®šä¹‰å¦‚ä¸‹

```jsx
type option<'a> = None | Some('a)
```

æ„æ€å°±æ˜¯è¿™ä¸ªç±»å‹è¦ä¹ˆæ˜¯none, è¦ä¹ˆå°±æ˜¯è¢«someåŒ…å«çš„å®é™…å€¼.

æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªifè¡¨è¾¾å¼, æ¥å¯¹ä¸€ä¸ªå€¼è¿›è¡Œç»‘å®šæ“ä½œ

```jsx
let licenseNumber =
  if personHasACar {
    Some(5)
  } else {
    None
  }
```

åŒæ ·çš„, ä½ å¯ä»¥ä½¿ç”¨å¼ºå¤§çš„æ¨¡å¼åŒ¹é…, å¯¹è¿™ä¸ªå€¼è¿›è¡Œå®‰å…¨çš„è®¿é—®.

ä½†æ˜¯optionå’Œjsçš„äº’æ“ä½œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„, é€šå¸¸æƒ…å†µä¸‹, Some(5)ä¼šè¢«ç›´æ¥ç¼–è¯‘ä¸º5, Noneä¼šè¢«ç¼–è¯‘ä¸ºundefined, åœ¨jsä¸­å¦‚æœä½ çŸ¥é“ä¸€ä¸ªå€¼å¯èƒ½æ˜¯ä¸€ä¸ªundefined, é‚£ä½ å°±æ ‡æ³¨ä¸€ä¸ªoption<string>, åŒæ ·ä¹Ÿå¯ä»¥ç»™jsä¼ é€’ä¸€ä¸ªnoneæˆ–è€…some, å¯ä»¥è®©jsæ­£ç¡®è§£é‡Š

### è­¦å‘Š

1. ä¸è¦ä½¿ç”¨åµŒå¥—çš„Some(Some(Some(5)))
2. ä¸è¦ä½¿ç”¨å¤šæ€å˜ä½“option, è¦ä½¿ç”¨å…·ä½“çš„å˜ä½“ç±»å‹, æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢ä¸¾çš„ä¾‹å­, é€šè¿‡ifç»“æ„è¯­å¥æ¥ç»‘å®šä¸€ä¸ªå€¼
3. optionç±»å‹ä¸ä¼šå¯¹nullæˆ–è€…undefinedåšåŒºåˆ†, åœ¨resä¸­ä¼šæœ‰ä¸€äº›å…¶ä»–å‡½æ•°(æ ‡å‡†åº“å‡½æ•°)å¸®åŠ©æˆ‘ä»¬åˆ›å»ºnull/undefined, æ›´åŠ ä¾¿åˆ©çš„å’Œjsè¿›è¡Œäº’æ“ä½œ

[Null, Undefined and Option | ReScript Language Manual](https://rescript-idea.github.io/docs-cn/manual/latest/null-undefined-option#%E8%AD%A6%E5%91%8A-2)

---

## æ•°ç»„å’Œåˆ—è¡¨

resä¸­çš„æ•°ç»„å’Œjsä¸­çš„æ•°ç»„æ˜¯ä¸€æ ·çš„, å®ƒå¯ä»¥å¾ˆå¥½çš„å’Œjsè¿›è¡Œäº’æ“ä½œ; æ•°ç»„çš„ç±»å‹å¿…é¡»ä¸€è‡´

```jsx
let myArray = ["hello", "world", "how are you"]

let firstItem = myArray[0]

myArray[0] = "hey" // now ["hey", "world", "how are you"]

let pushedValue = Js.Array2.push(myArray, "bye")
```

ä½†æ˜¯åœ¨resä¸­æä¾›äº†ä¸€ç§å•é“¾è¡¨å®ç°çš„åˆ—è¡¨åŠŸèƒ½(åŒæ•°ç»„ä¸€æ ·, å†…å®¹å¿…é¡»ç±»å‹ç›¸åŒ), è¿™åœ¨jsä¸­æ˜¯ä¸å­˜åœ¨çš„, ä¼˜ç‚¹å°±æ˜¯å¤´æ’é€Ÿåº¦éå¸¸å¿«

```jsx
let myList = list{1, 2, 3}
```

å¦‚æœæˆ‘ä»¬è¦è¿›è¡Œä¸€ä¸ªå¤´æ’, å°±å¯ä»¥è¿™ä¹ˆåš

```jsx
let anotherList = list{0, ...myList}
```

å®ƒæ˜¯æ— å‰¯ä½œç”¨çš„, è€Œä¸”å¾ˆé«˜æ•ˆ, å› ä¸ºå®ƒä»¬æ˜¯å…±äº«mylistçš„, ç¼–è¯‘åçš„jså¦‚ä¸‹:

```jsx
var anotherList = {
  hd: 0,
  tl: myList
};
```

ä½†æ˜¯é‡åˆ°è¦æ’å…¥å¤šæ¬¡çš„æƒ…å†µ, å°±ä¸èƒ½åƒè¿™æ ·å±•å¼€äº†

```jsx
list{a, ...b, ...c}
```

reså¹¶ä¸æ”¯æŒ, å› ä¸ºåœ¨è¿™é‡Œbè¦ä»¥æ­¤æ’å…¥åˆ°bä¸­, è¿™æ˜¯ä¸€ä¸ªO(b)çš„æ“ä½œ, å¦‚æœéè¦æ’å…¥å¤šä¸ª, å°±è¦ä½¿ç”¨resæä¾›çš„concatæ ‡å‡†åº“api, ä½†æ˜¯ä»ç„¶ä¸æ¨è.

### æ€»ç»“

æˆ‘ä»¬åœ¨ä½¿ç”¨æ•°ç»„æ—¶, å°±åƒä½¿ç”¨jsä¸€æ ·, å¯ä»¥æ‰©å±•, å¯ä»¥éšæ„æ›´æ”¹; ä½†æ˜¯åœ¨ä½¿ç”¨åˆ—è¡¨æ—¶, éœ€è¦æ³¨æ„ä½¿ç”¨åœºæ™¯, åªé€‚åˆå¤´æ’, å¹¶ä¸å»ºè®®æ’å…¥å¤šæ¬¡, å’Œå¯¹æŸä¸ªå…ƒç´ è¿›è¡Œä¿®æ”¹(æ¶ˆè€—å¾ˆå¤§)

---

## å‡½æ•°

resçš„å‡½æ•°çš„å†™æ³•å’Œjså¤§è‡´ç›¸åŒ, å¹¶ä¸”ä¹Ÿå¯ä»¥ç¼–è¯‘ä¸ºçº¯å‡€çš„jsä»£ç 

```jsx
let greet = (name) => "Hello " ++ name
```

å”¯ä¸€ä¸åŒçš„æ˜¯, æˆ‘ä»¬çš„nameå‚æ•°ä¸éœ€è¦æŒ‡å®šç±»å‹, å®ƒæ˜¯å¯ä»¥æ ¹æ®ä¸‹æ–‡æ¨å¯¼å‡ºæ¥çš„, åœ¨è¿™é‡Œ, æˆ‘ä»¬çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸², æ‰€ä»¥nameä¹Ÿè¦æ±‚ä¼ é€’ä¸€ä¸ªstringç±»å‹

å¤šä¸ªå‚æ•°çš„è¡¨è¾¾æ˜¯è¿™æ ·

```jsx
let add = (x, y, z) => x + y + z
add(1, 2, 3) // 6
```

æœ‰è¾ƒé•¿çš„å‡½æ•°ä½“çš„æ—¶å€™, å¯ä»¥ç”¨{}è¿›è¡ŒåŒ…è£¹, å’Œjså‡½æ•°ä¸€æ ·

### æ ‡ç­¾å‚æ•°

resæä¾›äº†ä¸€ç§å‚æ•°å‡æœŸ, å³æ ‡ç­¾å‚æ•°, æ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªå‡½æ•°ä¸­å¾ˆå¤šå‚æ•°çš„ç±»å‹éƒ½æ˜¯ä¸€æ ·çš„, é‚£ä¹ˆåœ¨è¿›è¡Œç»‘å®šå‚æ•°æ—¶, å¾ˆéš¾çŸ¥é“å¯¹åº”çš„å‚æ•°æ˜¯ä»€ä¹ˆæ„ä¹‰, è¦éå¸¸æ³¨æ„åŸå‡½æ•°çš„å‚æ•°é¡ºåº, è¿™ä¼šé€ æˆä¸€å®šçš„å¼€å‘è´Ÿæ‹…, æ‰€ä»¥æä¾›äº†æ ‡ç­¾å‚æ•°, ä½†æ˜¯åœ¨jsä¸­, æˆ‘ä¸ªäººå–œæ¬¢åœ¨å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡, è¿™æ ·å°±ä¸ä¼šå­˜åœ¨å‚æ•°é¡ºåºçš„é—®é¢˜äº†

```jsx
let addCoordinates = (~x, ~y) => {
  // use x and y here
}
// ...
addCoordinates(~x=5, ~y=6)
```

æˆ‘ä»¬åœ¨å£°æ˜å‡½æ•°æ—¶, å¯ä»¥ç»™å‚æ•°åŠ å…¥æ ‡ç­¾, è¿™æ ·åœ¨è°ƒç”¨çš„æ—¶å€™å¯ä»¥æ˜¾å¼çš„æŒ‡å®šå‚æ•°, è€Œä¸éœ€è¦åœ¨æ„å‚æ•°é¡ºåº; åŒæ ·çš„æˆ‘ä»¬å¯ä»¥ç»™å‚æ•°èµ·åˆ«å

```jsx
let drawCircle = (~radius as r, ~color as c) => {
  setColor(c)
  startAt(r, r)
  // ...
}
```

ç»™å‚æ•°ä¸»åŠ¨æ ‡è®°ç±»å‹, è¿™æ ·æ¨å¯¼çš„ç±»å‹å°±ä¼šå¤±æ•ˆ

```jsx
let drawCircle = (~radius as r: int, ~color as c: string) => {
  // code here
}
```

### å¯é€‰å‚æ•°

resä¹Ÿå’Œtsä¸€æ ·æä¾›å¯é€‰ç±»å‹, æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶, å¯ä»¥å¿½ç•¥å®ƒä»¬

```jsx
let drawCircle = (~color, ~radius=?, ()) => {
  setColor(color)
  switch radius {
  | None => startAt(1, 1)
  | Some(r_) => startAt(r_, r_)
  }
}
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡`=?`è¿™æ ·çš„å†™æ³•è¯´æ˜è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°, æ­¤æ—¶radiusçš„ç±»å‹ä¸ºOption, æ˜¯ä¸€ä¸ªæˆ‘ä»¬ä¹‹å‰å°±å­¦ä¹ è¿‡çš„å˜ä½“ç±»å‹, å®ƒæœ‰å¯èƒ½æ˜¯None, ä¹Ÿæœ‰å¯èƒ½æ˜¯Some, æˆ‘ä»¬éœ€è¦åœ¨ä»£ç å—ä¸­åšä¸€ä¸ªä¸¥è°¨çš„æ¨¡å¼åŒ¹é….

> æ³¨æ„: åœ¨ä½¿ç”¨å¯é€‰å‚æ•°æ—¶, å¿…é¡»ä¿è¯å®ƒä¹‹åæ˜¯ä¸€ä¸ªéå¯é€‰çš„å‚æ•°, è¿™æ˜¯ç”±äºresçš„è®¾è®¡åŸå› å¯¼è‡´çš„, å¦‚æœæ²¡æœ‰å‚æ•°, ä½ å¯ä»¥ä½¿ç”¨unitç±»å‹, æ¯”å¦‚ä¸€ä¸ª()æ¥å ä½ (unitç±»å‹åœ¨åŸºç¡€ç±»å‹ä¸­æˆ‘ä»¬ä¹Ÿæ›¾ç»è¯´è¿‡)
> 

### ç±»å‹æ ‡æ³¨å’Œå‡½æ•°ç­¾å

é¦–å…ˆæˆ‘ä»¬åœ¨å¯é€‰å‚æ•°ä¸­éœ€è¦æ³¨æ„ä¸€ç‚¹, é‚£å°±æ˜¯å‡½æ•°çš„ç±»å‹å†…å¤–æœ‰åˆ«, æˆ‘ä»¬åœ¨ç»™å‡½æ•°åšç±»å‹ç­¾åçš„æ„ä¹‰å°±æ˜¯å¸Œæœ›å¤–ç•Œå¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•°, ä½†æ˜¯åœ¨å‡½æ•°å‚æ•°å†…éƒ¨, æˆ‘ä»¬å…¶å®å¸Œæœ›å‡½æ•°å†…éƒ¨å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå‚æ•°.

```jsx
let drawCircle: (~color: color, ~radius: int=?, unit) => unit =
  (~color: color, ~radius: option<int>=?, ()) => {
    setColor(color)
    switch radius {
    | None => startAt(1, 1)
    | Some(r_) => startAt(r_, r_)
    }
  }
```

å°±åƒè¿™ä¸ªdrawCircleå‡½æ•°æˆ‘ä»¬å¸Œæœ›å¯¹å¤–æä¾›ä¸€ä¸ªå¯é€‰çš„radiusçš„intç±»å‹, é‚£ä¹ˆå¯¹äºå‡½æ•°å†…éƒ¨, radiusçš„ç±»å‹ä¾ç„¶æ˜¯int, åªä¸è¿‡æ˜¯option<int>, æ‰€ä»¥è¿™ä¸ªä¾‹å­å°±è¯´æ˜äº†å‚æ•°ç±»å‹å†…å¤–æœ‰åˆ«

### ç›´æ¥ä¼ é€’optionç±»å‹ç»™å‚æ•°

æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°, ä»ä¸€ä¸ªåœ°æ–¹æ‹¿åˆ°ä¸€ä¸ªå€¼, å°±è¦ä¼ é€’ç»™å‡½æ•°, å¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„å‚æ•°æœ‰å¯èƒ½æ˜¯å¯é€‰çš„, å³None|Some, æœ‰å¯èƒ½ä¼šè¿™æ ·å†™

```jsx
let result =
  switch payloadRadius {
  | None => drawCircle(~color, ())
  | Some(r) => drawCircle(~color, ~radius=r, ())
  }
```

æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªæ¨¡å¼åŒ¹é…, åˆ†ä¸åŒçš„æƒ…å†µè¿›è¡Œå‚æ•°ä¼ é€’

å•Šè¿™? å¤ªæ¶å¿ƒäº†, æ‰€ä»¥resæä¾›äº†ä¸€ä¸ªç®€å†™, è®©æˆ‘ä»¬ç›´æ¥å¯ä»¥æŠŠä¸ç¡®å®šçš„å‚æ•°ä¼ é€’ç»™å‡½æ•°å¯é€‰å‚æ•°

```jsx
let result = drawCircle(~color, ~radius=?payloadRadius, ())
```

### å¯é€‰é»˜è®¤å€¼

ç»™å¯é€‰å‚æ•°ä¸€ä¸ªé»˜è®¤å€¼, æ­¤æ—¶è¿™ä¸ªå‚æ•°ä¸ä¼šæ˜¯optionç±»å‹

```jsx
let drawCircle = (~radius=1, ~color, ()) => {
  setColor(color)
  startAt(radius, radius)
}
```

## é€’å½’

resé»˜è®¤çš„å‡½æ•°ä¸æ”¯æŒé€’å½’, æˆ‘ä»¬éœ€è¦åœ¨letååŠ å…¥ä¸€ä¸ªrecæ–¹å¯æ”¯æŒ, å¹¶ä¸”ä¼šå°†é€’å½’ä»£ç ç¼–è¯‘ä¼˜åŒ–ä¸ºé«˜æ•ˆçš„whileå¾ªç¯, æ¯”å¦‚è¿™æ ·

```jsx
let rec listHas = (list, item) =>
  switch list {
  | list{} => false
  | list{a, ...rest} => a === item || listHas(rest, item)
  }
```

ç¼–è¯‘ä¸º

```jsx
function listHas(_list, item) {
  while(true) {
    var list = _list;
    if (!list) {
      return false;
    }
    if (list.hd === item) {
      return true;
    }
    _list = list.tl;
    continue ;
  };
}
```

å› ä¸ºä¼ ç»Ÿçš„é€’å½’ä¼šå­˜åœ¨å †æ ˆé—®é¢˜, ä¼šé€ å°±å…ˆæ‰§è¡Œåè¿ç®—, è€Œå°¾é€’å½’æ˜¯å…ˆè®¡ç®—åæ‰§è¡Œ, åœ¨jså¼•æ“ä¸­å°±ä¸éœ€è¦åˆ‡æ¢å †æ ˆå¸§äº†, å°¾é€’å½’å®ç°ä¸‹, æ˜¯å¯ä»¥å…¬ç”¨ä¸€ä¸ªçš„

### äº’é€’å½’å‡½æ•°

å¥½å§, æˆ‘æ‰¿è®¤è¿™ä¸ªæ²¡å•¥ç”¨, ä½†æ˜¯ç¼–è¯‘å‡ºæ¥çš„jsçœŸä¼˜é›…

```jsx
let rec callSecond = () => callFirst()
and callFirst = () => callSecond()
```

```jsx
function callSecond(_param) {
  while(true) {
    _param = undefined;
    continue ;
  };
}

function callFirst(_param) {
  while(true) {
    _param = undefined;
    continue ;
  };
}
```

### å¼‚æ­¥

å’Œasync awaitä¸€æ ·, å’Œjsçš„å†™æ³•æ˜¯å®Œå…¨ä¸€æ ·çš„, åŒ…æ‹¬è¡Œä¸ºå’Œtséƒ½æ˜¯ä¸€æ ·çš„, æ¯”å¦‚promise<string>è¢«awaitä¹‹åä¼šè¢«æ¨æ–­ä¸ºstring

```jsx
let getUserName = async (userId) => userId

let greetUser = async (userId) => {
  let name = await getUserName(userId)
  "Hello " ++ name ++ "!"
}
```

é”™è¯¯å¤„ç†, æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨try-catch, åœ¨resä¸­å’ŒåŒæ­¥ä»£ç ä¸€æ ·, å¼‚æ­¥ä»£ç ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æ•è·å¼‚å¸¸, å®ƒä¼šè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªtry catch

```jsx
exception SomeReScriptException

let somethingThatMightThrow = async () => raise(SomeReScriptException)

let someAsyncFn = async () => {
  switch await somethingThatMightThrow() {
  | data => Some(data)
  | exception JsError(_) => None
  | exception SomeReScriptException => None
  }
}
```

jså¼‚å¸¸å’Œrescriptå¼‚å¸¸éƒ½å¯ä»¥è¢«æ•è·åˆ°

### å¿½ç•¥å‡½æ•°è¿”å›å€¼ignore

```jsx
mySideEffect()->Promise.catch(handleError)->ignore

Js.Global.setTimeout(myFunc, 1000)->ignore
```

è¿”å›ä¸€ä¸ªå“‘ç±»å‹unit, ä½ å¯ä»¥ç®€å•ç²—æµ…çš„ç†è§£ä¸ºå‡½æ•°è¿”å›å€¼çš„any (tsæ¦‚å¿µ)

### æ¥å£æ–‡ä»¶

å¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£æ–‡ä»¶.resi, ä¸ºreså®ç°æ–‡ä»¶æ ‡æ³¨ç±»å‹

---

## åˆ¤æ–­å’Œå¾ªç¯

åœ¨resä¹‹å‰æˆ‘ä»¬å°±ä½¿ç”¨è¿‡ifåˆ¤æ–­, å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ifè¿›è¡Œä¸€ä¸ªæ±‚å€¼æ“ä½œ

```jsx
let isMorning = true

let message = if isMorning {
  "Good morning!"
} else {
  "Hello!"
}
```

å¦‚æœå½“å‰æ²¡æœ‰elseåˆ†æ”¯, ä¼šæœ‰ä¸€ä¸ª() unitç±»å‹æ›¿ä»£, æ‰€ä»¥ä¸‹é¢çš„2ä¸ªå†™æ³•æ˜¯ç­‰ä»·çš„

```jsx
if showMenu {
  displayMenu()
}
```

```jsx
if showMenu {
  displayMenu()
} else {
  ()
}
```

å¦‚æœä½ ä¸ä¼ é€’elseåˆ†æ”¯, åˆå†™äº†ä¸‹é¢çš„ä»£ç , ä¼šæŠ¥ä¸€ä¸ªç±»å‹é”™è¯¯, åŸå› å°±æ˜¯elseé»˜è®¤æ˜¯unitç±»å‹, è€Œifåˆ†æ”¯åˆ™æ˜¯intç±»å‹, è¿™å¯¹äºæˆ‘ä»¬çš„ç¨‹åºæ¥è¯´ä¹Ÿæ˜¯ä¸¥è°¨çš„, æ‰€ä»¥æˆ‘ä»¬è¦ä¹ æƒ¯çš„å‡†ç¡®æä¾›elseåˆ†æ”¯

```jsx
let result = if showMenu {
  1 + 2
}
```

å½“ç„¶è¿˜æä¾›ä¸‰ç›®è¿ç®—ç¬¦, ä½†æ˜¯æˆ‘å»ºè®®ä½ ä½¿ç”¨if-else, å› ä¸ºä»£ç æ›´åŠ æ¸…æ™°å¯ç»´æŠ¤, å› ä¸ºif-elseç¼–è¯‘ä¹‹åä¹Ÿæ˜¯ä¸‰ç›®.

resæä¾›çš„forå¾ªç¯ä¹Ÿæ˜¯å¾ˆå¼ºå¤§çš„, æˆ‘ä»¬å¯ä»¥åœ¨forä¸­æŒ‡å®šä¸€ä¸ªèµ·å§‹å’Œé‡ç‚¹

```jsx
for x in 1 to 3 {
  Js.log(x)
}
```

ç¼–è¯‘ä¸ºè¿™æ ·çš„jsä»£ç 

```jsx
for(var x = 1; x <= 3; ++x){
  console.log(x);
}
```

æˆ‘ä»¬å¯ä»¥å°†toå…³é”®å­—å˜ä¸º`downto`, è®¡æ•°å¯ä»¥ä»å¤§åˆ°å°è®¡æ•°

resåŒæ ·ä¹Ÿæä¾›ä¸€ä¸ªwhileå¾ªç¯, ä¹Ÿå¯ä»¥ç»‘å®šä¸€ä¸ªè¡¨è¾¾å¼

```jsx
while testCondition {
  // body here
}
```

åœ¨resä¸­, æ²¡æœ‰breakå’Œreturnå¯ä»¥è·³å‡ºå¾ªç¯, ä½ éœ€è¦ä½¿ç”¨reså…¶ä»–çš„æ¦‚å¿µ, æ¯”å¦‚å¯å˜ç»‘å®šæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½, å¦‚æœä½ å†™è¿‡vue3ç›¸å…³çš„jsåº“, åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ä¸‹é¢è¿™æ®µä»£ç , å¯å˜ç»‘å®šçš„æ¦‚å¿µä¼šåœ¨ä¹‹åç»§ç»­æ·±å…¥

```jsx
let break = ref(false)

while !break.contents {
  if Js.Math.random() > 0.3 {
    break := true
  } else {
    Js.log("Still running")
  }
}
```

---

## ç®¡é“

æ¥ä¸‹æ¥æˆ‘ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸ªresçš„ç‰¹æ€§, å¥½å§æˆ‘æ‰¿è®¤è¿™ä¸ªç‰¹æ€§å¯¹æˆ‘æ¥è¯´å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨, æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹è¿™ä¸ªåœºæ™¯

```jsx
validateAge(getAge(parseData(person)))
```

æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª`â†’`ç‰¹æ€§æ¥è¡¨è¾¾, è®©å®ƒæˆä¸ºä¸€ä¸ªé“¾è°ƒç”¨, è€Œä¸”è¿™ä¸ªç‰¹æ€§æ²¡æœ‰è¿è¡Œæ—¶å¼€é”€, å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ç®¡é“è¿™æ ·æ”¹å†™

```jsx
person
  ->parseData
  ->getAge
  ->validateAge
```

[Pipe | ReScript Language Manual](https://rescript-idea.github.io/docs-cn/manual/latest/pipe)

å› ä¸ºç®¡é“éƒ¨åˆ†æˆ‘ä¸æ˜¯å¾ˆæ„Ÿå†’, è€Œä¸”å®åœ¨æ˜¯å˜æ¢ä¸è¿‡æ€ç»´æ–¹å¼å»è¿™æ ·è°ƒç”¨å‡½æ•°, æˆ‘è®¤ä¸ºä¼šå¯¹æˆ‘é€ æˆä¸€å®šçš„é˜…è¯»è´Ÿæ‹…, æ‰€ä»¥ç®¡é“éƒ¨åˆ†å¦‚æœè¯»è€…ä»¬æœ‰å…´è¶£, å°±å¯ä»¥è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£

---

## å¯å˜æ€§

åœ¨ä¹‹å‰çš„ç« èŠ‚æˆ‘ä»¬æ›¾ç»è°ˆåˆ°è¿‡ä¸€ä¸ªæ¦‚å¿µ, å°±æ˜¯åœ¨å¾ªç¯ä¸­æˆ‘ä»¬æ²¡æœ‰ç±»ä¼¼`break`è¿™æ ·çš„å…³é”®å­—, æˆ‘ä»¬å½“æ—¶ä½¿ç”¨äº†ä¸€ä¸ªresçš„æ¦‚å¿µå«åšå¯å˜æ€§, é€šè¿‡å¯å˜æ€§çš„å˜é‡è¢«ä¿®æ”¹, ç„¶ååŠ¨æ€çš„é˜»æ­¢(è·³å‡º)å¾ªç¯

```jsx
let break = ref(false)

while !break.contents {
  if Js.Math.random() > 0.3 {
    break := true
  } else {
    Js.log("Still running")
  }
}
```

è¿™æ˜¯æˆ‘ä»¬å½“æ—¶å†™çš„demo, æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ä¸€ç« èŠ‚å¿«é€Ÿè¿‡ä¸€ä¸‹å¯å˜æ€§æ¦‚å¿µ.

letçš„ç»‘å®šæ˜¯ä¸å¯å˜çš„, è¿™åœ¨æˆ‘ä»¬æœ€å¼€å§‹çš„æ•™ç¨‹å·²ç»è¯´è¿‡äº†, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å†™ä»¥ä¸‹çš„ä»£ç è¿›è¡Œä¿®æ”¹

```jsx
let myValue = ref(5)
```

å®ƒè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªå¯¹è±¡

```jsx
var myValue = {
  contents: 5
};
```

ä½ å¯ä»¥è¿™æ ·å»è·å¾—myValue

```jsx
let five = myValue.contents // 5
```

åŒæ ·çš„, ä½ å¯ä»¥å¯¹contentsè¿›è¡Œé‡æ–°ç»‘å®š/èµ‹å€¼

```jsx
myValue.contents = 6
```

æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªè¯­æ³•ç³–æ¥ä»£æ›¿

```jsx
myValue := 6
```

> æç¤º, ä½ å¯ä»¥ä¸ä½¿ç”¨å¯å˜æ€§refæ¥ä¿®æ”¹letç»‘å®š, ä½ ä¹Ÿå¯ä»¥è¦†ç›–letç»‘å®šæ¥å®ç°è½»é‡çº§çš„ä¿®æ”¹
> 

```jsx
let result = 0
let result = calculate(result)
```

è¿™æ ·ä¹Ÿæ˜¯okçš„, æ‰€ä»¥æƒ³ä¿®æ”¹letç»‘å®š, ä½ å¯ä»¥è‡ªè¡Œé€‰æ‹©2ç§æ–¹æ¡ˆ

---

## ****æƒ°æ€§å€¼****

è¿™ä¹Ÿæ˜¯ä¸€ä¸ªresä¸­æ¯”è¾ƒç®€å•çš„æ¦‚å¿µ, æ‰€ä»¥æˆ‘ä»¬ç”¨å¾ˆç®€å•çš„è¯å»è§£é‡Šå®ƒ, å°±æ˜¯ä¸€ä¸ªå€¼çš„ç»‘å®šå¯ä»¥æ˜¯æƒ°æ€§çš„

```jsx
let expensiveFilesRead = lazy({
  Js.log("Reading dir")
})
```

æ¯”æ–¹è¯´åœ¨è¿™ä¸ªå€¼ä¸­æœ‰ä¸€ä¸ªæ˜‚è´µçš„è¿ç®—, æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå€¼çš„æ—¶å€™å¹¶ä¸ä¼šç«‹å³è®¡ç®—, æˆ‘ä»¬éœ€è¦æ˜¾å¼çš„æ‰§è¡Œè¿™ä¸ªæƒ°æ€§å€¼

```jsx
Lazy.force(expensiveFilesRead)
```

åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹å, ä½ æ— æ³•å†æ¬¡è§¦å‘æ‰§è¡Œæƒ°æ€§å€¼, æ‰€ä»¥è¯·ç¡®ä¿ä½ ä½¿ç”¨æƒ°æ€§å€¼çš„åœºæ™¯æ˜¯ä¸€æ¬¡æ€§çš„, æ¯”å¦‚ä»æœåŠ¡ç«¯è·å–çš„ç»“æœå§‹ç»ˆæ˜¯ä¸€æ ·çš„

---

## async & await Promise

resä¸­çš„promise**æœ€æ–°çš„api**è¿˜ä¸æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†, æˆ‘ä»¬åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ä¸ºäº†æ¼”ç¤ºæœ€æ–°çš„promise api, éœ€è¦é¢å¤–ä¸‹è½½ä¸€ä¸ªåŒ…

```jsx
npm install @ryyppy/rescript-promise --save
```

ä¿®æ”¹bsconfig.jsoné…ç½®æ–‡ä»¶

```jsx
{
  "bs-dependencies": ["@ryyppy/rescript-promise"]
}
```

ç¼–å†™ä»¥ä¸‹å‡½æ•°

```jsx
let p1 = Promise.make((resolve, _reject) => {
  resolve(. "hello world")
})

let p2 = Promise.resolve("some value")
```

å°†ç¼–è¯‘ä¸ºä»¥ä¸‹çš„jsä»£ç 

```jsx
// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var p1 = new Promise((function (resolve, _reject) {
        resolve("hello world");
      }));

var p2 = Promise.resolve("some value");

exports.p1 = p1;
exports.p2 = p2;
/* p1 Not a pure module */
```

å…·ä½“å…³äºæ­¤åº“çš„ä½¿ç”¨æ–¹æ³•, å¯ä»¥å‰å»æ–‡æ¡£è§‚æ‘©

[GitHub - ryyppy/rescript-promise: Proposal for a proper Js.Promise binding](https://github.com/ryyppy/rescript-promise)